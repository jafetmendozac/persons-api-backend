{"version":3,"sources":["components/Filter.js","components/Notification.js","components/NotificationError.js","components/PersonForm.js","components/Persons.js","services/persons.js","App.js","selectors/filteredByName.js","selectors/getByNames.js","index.js"],"names":["Filter","handleFilterChange","filterPerson","type","onChange","length","map","filter","name","number","Notification","message","className","NotificationError","PersonForm","addName","handleNameChange","newName","handleNumberChange","newNumber","onSubmit","placeholder","value","Persons","persons","handleDeleteChange","person","onClick","baseUrl","personService","getAll","axios","get","then","data","create","newPerson","post","update","newObject","getPerson","id","put","deletePerson","delete","App","useState","setPersons","setNewName","setNewNumber","personSearch","setPersonSearch","success","setSuccess","errorMessage","setErrorMessage","useEffect","returnedPeople","toLocaleLowerCase","includes","filteredByName","e","target","preventDefault","getByNames","window","confirm","returnedPerson","console","log","setTimeout","catch","error","response","err","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6847efb7.chunk.js","sourcesContent":["\r\nexport const Filter = ({\r\n  handleFilterChange,\r\n  filterPerson\r\n}) => {\r\n  return (\r\n    <>\r\n      <div>\r\n\r\n        filter show with{' '}\r\n        <input\r\n          type=\"text\"\r\n          onChange={ handleFilterChange }\r\n        />\r\n\r\n        <br />\r\n\r\n        { \r\n\r\n          ( filterPerson?.length <= 2 ) && \r\n          filterPerson.map( filter => <li key={filter.name}> { filter.name } { filter.number } </li> ) \r\n\r\n        }\r\n        \r\n      </div>\r\n    </>\r\n  )\r\n}\r\n","\r\n\r\nexport const Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className='success'>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\n","\r\nexport const NotificationError = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className='error'>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nexport const PersonForm = ({\r\n  addName,\r\n  handleNameChange,\r\n  newName,\r\n  handleNumberChange,\r\n  newNumber\r\n}) => {\r\n  return (\r\n    <>\r\n      <form onSubmit={ addName }>\r\n\r\n      <div>\r\n        name:{' '} \r\n        <input \r\n          onChange={ handleNameChange }\r\n          placeholder=\"Add name\"\r\n          value={ newName }\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        numero:{' '} \r\n        <input \r\n          onChange={ handleNumberChange }\r\n          placeholder=\"Add number\"\r\n          value={ newNumber }\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n\r\n      </form>\r\n    </>\r\n  )\r\n}\r\n","\r\n\r\nexport const Persons = ({ persons, handleDeleteChange }) => {\r\n\r\n\r\n  return (\r\n    <>\r\n      <ol>\r\n\r\n        {persons.map( person => \r\n          <li key={person.name}>\r\n            {person.name} {person.number} {' '}\r\n            <button\r\n              onClick={ () => handleDeleteChange( person ) }\r\n            >\r\n              delete\r\n            </button>\r\n          </li>  \r\n        )}\r\n\r\n      </ol>\r\n    </>\r\n  )\r\n}\r\n","import axios from \"axios\";\r\n// const baseUrl = 'https://glacial-tundra-52621.herokuapp.com/api/persons';\r\nconst baseUrl = 'api/persons';\r\n\r\n\r\n\r\nconst getAll = () => {\r\n  return (\r\n    axios.get(baseUrl)\r\n      .then( ({ data }) =>  data)\r\n  )\r\n}\r\n\r\nconst create = ( newPerson ) => {\r\n  return (\r\n    axios.post( baseUrl, newPerson )\r\n      .then( ({ data }) => data )\r\n  )\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n  return (\r\n    axios.delete( `${baseUrl}/${id}`)\r\n  )\r\n}\r\n\r\nconst update = ( newObject, getPerson ) => {\r\n\r\n  const id = getPerson[0].id\r\n\r\n  return (\r\n    axios.put( `${baseUrl}/${id}`, newObject )\r\n      .then(({ data }) => \r\n        data\r\n      )\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\nconst personService = {\r\n  getAll,\r\n  create,\r\n  update,\r\n  deletePerson\r\n} ;\r\n\r\nexport default personService ;","import { useEffect, useState } from 'react'\r\nimport { Filter } from './components/Filter'\r\nimport { Notification } from './components/Notification'\r\nimport { NotificationError } from './components/NotificationError'\r\nimport { PersonForm } from './components/PersonForm'\r\nimport { Persons } from './components/Persons'\r\nimport { filteredByName } from './selectors/filteredByName'\r\nimport { getByNames } from './selectors/getByNames'\r\nimport personService from './services/persons'\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ personSearch, setPersonSearch] = useState('')\r\n  const [ success, setSuccess ] = useState(null)\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n\r\n    personService.getAll()\r\n      .then( returnedPeople => {\r\n        setPersons( returnedPeople )\r\n      })\r\n      \r\n  }, [])\r\n\r\n\r\n  const addName = (e) => {\r\n    e.preventDefault()\r\n\r\n    const newObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    const getPerson = getByNames(persons, newName)\r\n\r\n    if( getPerson.length === 1) {\r\n      if (window.confirm(`${getPerson[0].name} is already added to phonebook, replace the old number with a new one`)) {\r\n      \r\n        personService.update( newObject, getPerson )\r\n          .then( ( returnedPerson ) => {\r\n            console.log('returnedPerson', returnedPerson);\r\n            setPersons( persons.map( person => persons.id !== returnedPerson.id ? person : returnedPerson ) )\r\n            setNewName('')\r\n            setNewNumber('')\r\n\r\n            setSuccess(`Updated number of ${ returnedPerson.name }`)\r\n            setTimeout(() => {\r\n            setSuccess(null)\r\n            }, 4000);\r\n          } )\r\n          .catch( error => {\r\n            setErrorMessage(`Information of ${ getPerson[0].name } has already been removed from server`)\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 4000);\r\n          })\r\n      }\r\n      setNewName('')\r\n      setNewNumber('')\r\n\r\n    } else {\r\n      personService.create( newObject )\r\n        .then( returnedPerson => {\r\n          setPersons([ ...persons, returnedPerson ])\r\n          setNewName('')\r\n          setNewNumber('')\r\n\r\n          setSuccess(`Added ${ returnedPerson.name }`)\r\n          setTimeout(() => {\r\n            setSuccess(null)\r\n          }, 4000);\r\n        })\r\n    }\r\n  }\r\n\r\n  const handleNameChange = (e) => {\r\n    setNewName( e.target.value )\r\n  }\r\n\r\n  const handleNumberChange = (e) => {\r\n    setNewNumber( e.target.value )\r\n  }\r\n\r\n  const handleFilterChange = (e) => {\r\n    setPersonSearch( e.target.value )\r\n  }\r\n\r\n  const handleDeleteChange = ({ name, id }) => {\r\n    if(window.confirm(`Delete ${name}`)){\r\n      \r\n      personService.deletePerson(id)\r\n        .then( response => {\r\n          setPersons(persons.filter( person => person.id !== id ))\r\n          \r\n        })\r\n        .catch( err => console.log('fail', err ))\r\n    }\r\n  }\r\n\r\n  const filterPerson = filteredByName( persons, personSearch )\r\n\r\n\r\n  return (\r\n    <>\r\n      <h1>Phonebook</h1>\r\n\r\n      <Notification message={ success } />\r\n      <NotificationError message={ errorMessage } />\r\n\r\n      <Filter\r\n        handleFilterChange={handleFilterChange}\r\n        filterPerson={filterPerson}\r\n      />\r\n\r\n\r\n      <h1>add a new</h1>\r\n\r\n      <PersonForm \r\n        addName={addName}\r\n        handleNameChange={handleNameChange}\r\n        newName={newName}\r\n        handleNumberChange={handleNumberChange}\r\n        newNumber={newNumber}\r\n      />\r\n\r\n\r\n      <h1>Numbers</h1>\r\n\r\n      <Persons \r\n        persons={ persons }\r\n        handleDeleteChange={ handleDeleteChange }\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App\r\n","\r\n\r\n\r\nexport const filteredByName = ( persons, personSearch ) => {\r\n\r\n    \r\n    const findPerson = persons.filter( person => person.name.toLocaleLowerCase().includes(personSearch) === true );\r\n  \r\n    return findPerson;\r\n  \r\n}\r\n","\r\n\r\nexport const getByNames = ( persons, newName='' ) => {\r\n\r\n  return persons.filter( person => person.name.toLocaleLowerCase() === newName.toLocaleLowerCase() )\r\n\r\n}","import ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './index.css';\n\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}